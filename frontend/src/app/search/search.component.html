<div class="login mt-4 pt-2 col-lg-5 col-md-8 col-sm-12 mx-auto p-3 rounded-4">
    <div class="pt-5 pb-2 text-center fs-2 text-white" style="font-family: Georgia, 'Times New Roman', Times, serif;">
        Events Search
    </div>
    <hr class="mb-2 border border-white">
    <form ngNativeValidate>
        <div class="form-row">
            <div class="form-group col-md text-left mt-3">
                <label for="Keyword" class="label-color">Keyword<span class="text-danger">*</span></label>
                <input matInput type="text" [formControl]="keyword" [matAutocomplete]="auto"
                    class="form-control text-dark rounded" required (input)="getSuggestions()">
                <mat-autocomplete #auto="matAutocomplete">
                    <mat-option *ngIf="isLoading" class="is-loading">
                        <mat-spinner diameter="20"></mat-spinner>
                    </mat-option>
                    <ng-container *ngIf="!isLoading">
                        <mat-option style="color:white;" *ngFor="let rec of recommendations" [value]="rec">
                            {{rec}}
                        </mat-option>
                    </ng-container>
                </mat-autocomplete>
            </div>
        </div>

        <div class="form-row">
            <div class="form-group text-left col-md-6">
                <label for="Distance" class="label-color">Distance</label>
                <input type="number" [formControl]="distance" class="form-control text-dark rounded" name="Distance"
                    placeholder="10" value="10" min="0">
            </div>
            <div class="form-group text-left col-md-0"></div>
            <div class="form-group text-left col-md-5">
                <label for="Category" class="label-color">Category<span class="text-danger">*</span></label>
                <select id="Category" class="form-select w-75" [formControl]="category" name="Category" required>
                    <option
                        value="KZFzniwnSyZfZ7v7nJ,KZFzniwnSyZfZ7v7nE,KZFzniwnSyZfZ7v7na,KZFzniwnSyZfZ7v7nn,KZFzniwnSyZfZ7v7n1"
                        selected>Default</option>
                    <option value="KZFzniwnSyZfZ7v7nJ">Music</option>
                    <option value="KZFzniwnSyZfZ7v7nE">Sports</option>
                    <option value="KZFzniwnSyZfZ7v7na">Arts & Theatre</option>
                    <option value="KZFzniwnSyZfZ7v7nn">Film</option>
                    <option value="KZFzniwnSyZfZ7v7n1">Miscellaneous</option>
                </select>
            </div>
        </div>
        <div class="form-group text-left">
            <label for="Location" class="label-color">Location<span class="text-danger">*</span></label>
            <input type="text" name="location" id="location" [formControl]="location"
                class="form-control text-dark rounded" required>
            <div class="form-check pt-2 pb-4">
                <input class="form-check-input" type="checkbox" [formControl]="autodetect" [checked]="autodetect.value"
                    (change)="autoDetectLocation()">
                <label class="form-check-label" for="gridCheck">Auto-detect your location</label>
            </div>
        </div>

        <div class="pb-5 text-center mx-auto">
            <button type="submit" (click)="sendFormData();"
                class="btn btn-danger pt-1 pb-1 pl-2 pr-2 mr-1 button-font">SUBMIT</button>
            <button type="reset" (click)="clearForm();"
                class="btn btn-primary pt-1 pb-1 pl-2 pr-2 ml-2 button-font">CLEAR</button>
        </div>


    </form>
</div>


<div class="pb-5 pt-5" *ngIf="eventTableDetails">
    <!-- table -->
    <div *ngIf="TableDetailFlag==true">
        <!-- Table eventlist table *ngIf="eventList && eventList.length != 0" -->
        <div *ngIf="eventList && eventList.length!=0"
            class='mt-5 mb-5 mx-auto col-lg-8 col-sm-12 text-center table-responsive'>
            <table class="table table-striped table-dark event-list rounded-top">
                <thead>
                    <tr>
                        <th scope="col" class="col-md-1">Date/Time</th>
                        <th scope="col" class="col-md-2">Icon</th>
                        <th scope="col" class="col-md-3">Event</th>
                        <th scope="col" class="col-md-2">Genre</th>
                        <th scope="col" class="col-md-1">Venue</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let e of eventList" style="cursor: pointer;"
                        (click)="searchEventDetails(e.eId);eventCardFlag=true">
                        <th scope="row">{{e.eDate}}<br>{{e.eTime}}</th>
                        <td><img [src]="e.eIcon" height=86 width="96"></td>
                        <td>{{e.eName}}</td>
                        <td>{{e.eGenre}}</td>
                        <td>{{e.eVenue}}</td>
                    </tr>
                </tbody>
            </table>
        </div>
        <!-- No Result found div *ngIf="eventList.length == 0" -->
        <div *ngIf="eventList.length == 0"
            class="card rounded-4 mx-auto text-center text-danger bg-white col-lg-6 col-9 fs-5 mt-5">
            No results available
        </div>
    </div>
    <div *ngIf="TableDetailFlag==false">
        <!-- Details Card -->
        <div *ngIf="eventDetails && eventDetails.length!=0"
            class="event-card text-center pl-0 pr-0 col-lg-7 col-sm-12 mt-5 mx-auto">
            <div class="text-white col-md-12 text-left pl-2 pt-4">
                <div (click)="back()" style="cursor:pointer;">
                    <mat-icon svgIcon="back-icon" aria-hidden="false"></mat-icon>
                    <span class="aligned-with-icon"><u>Back</u></span>
                </div>
            </div>
            <div class="m-5">
                <div class="text-white m-3">
                    <div><span class="fs-4">{{ eventDetails.eventName }}&nbsp;</span>
                        <span *ngIf="redFlag===false; else RedHeart" class="bg-white rounded-circle p-2"
                            (click)="sendDataToLocalStorage()">
                            <mat-icon svgIcon="heart-icon" aria-hidden="false"
                                style="vertical-align: middle !important; cursor: pointer;"></mat-icon>
                        </span>
                        <ng-template #RedHeart>
                            <span class="bg-white rounded-circle p-2" (click)="sendDataToLocalStorage()">
                                <mat-icon svgIcon="heart-fill-icon"
                                    style="fill: red; vertical-align: middle !important  ;cursor: pointer;"
                                    aria-hidden="false"></mat-icon>
                            </span>
                        </ng-template>
                    </div>
                </div>
            </div>
            <div>
                <mat-tab-group animationDuration="250ms" mat-stretch-tabs="false" mat-align-tabs="center"
                    disablePagination="true">
                    <mat-tab label="Events">
                        <div class="mx-0 row text-white mb-4 col-12 pt-3">
                            <div class="col-lg-6 col-sm-12">
                                <div class="mb-3" *ngIf="eventDetails.eventDate.length!=0">
                                    <h3 class=" m-0 fs-5 event-card-headings">Date</h3>
                                    <p style="font-size:15px;">{{ eventDetails.eventDate }}</p>
                                </div>
                                <div class="mb-3" *ngIf="eventDetails.artists.length!=0">
                                    <h3 class="m-0 fs-5 event-card-headings">Artist/Team</h3>
                                    <p style="font-size:15px;">{{ eventDetails.artists }}</p>
                                </div>
                                <div class="mb-3" *ngIf="eventDetails.venueName.length!=0">
                                    <h3 class="m-0 fs-5 event-card-headings">Venue</h3>
                                    <p style="font-size:15px;">{{ eventDetails.venueName }}</p>
                                </div>
                                <div class="mb-3" *ngIf="eventDetails.genres.length!=0">
                                    <h3 class="m-0 fs-5 event-card-headings">Genres</h3>
                                    <p style="font-size:15px;">{{ eventDetails.genres }}</p>
                                </div>
                                <div class="mb-3" *ngIf="eventDetails.priceRanges.length!=0">
                                    <h3 class="m-0 fs-5 event-card-headings">Price Ranges</h3>
                                    <p style="font-size:15px;">{{ eventDetails.priceRanges }}</p>
                                </div>
                                <div class="mb-3" *ngIf="eventDetails.ticketstatus.length!=0">
                                    <h3 class="m-0 fs-5 event-card-headings">Ticket Status</h3>
                                    <p *ngIf="eventDetails.ticketstatus=='onsale'"
                                        class="btn rounded-3 pl-2 pr-2 btn-success mb-0 active"
                                        style="cursor: default;">On Sale</p>
                                    <p *ngIf="eventDetails.ticketstatus=='offsale'"
                                        class="btn rounded-3 pl-2 pr-2 btn-danger mb-0 active" style="cursor: default;">
                                        Off Sale</p>
                                    <p *ngIf="eventDetails.ticketstatus=='rescheduled'"
                                        class="btn rounded-3 pl-2 pr-2 btn-warning mb-0 active"
                                        style="cursor: default;">Rescheduled</p>
                                    <p *ngIf="eventDetails.ticketstatus=='postponed'"
                                        class="btn rounded-3 pl-2 pr-2 btn-warning mb-0 active"
                                        style="cursor: default;">Postponed</p>
                                    <p *ngIf="eventDetails.ticketstatus=='canceled'"
                                        class="btn rounded-3 pl-2 pr-2 btn-dark mb-0 active" style="cursor: default;">
                                        Canceled</p>
                                </div>
                                <div class="mb-3" *ngIf="eventDetails.ticketmasterUrl.length!=0">
                                    <h3 class="m-0 fs-5 event-card-headings">Buy Ticket At:</h3>
                                    <p style="font-size:15px;"><a target="_blank"
                                            href={{eventDetails.ticketmasterUrl}}><u>Ticketmaster</u></a></p>
                                </div>
                            </div>
                            <div class="col-lg-6 col-sm-12" style="margin: auto;">
                                <div *ngIf="eventDetails.seatmap.length!=0">
                                    <img [src]="eventDetails.seatmap.staticUrl" class="img-fluid col-lg-12 col-sm-10">
                                </div>
                            </div>
                            <div class="text-white mx-auto mt-3 align-bottom">
                                <span style="vertical-align: super;">Share on: </span>
                                <mat-icon svgIcon="twitter-icon" class="mx-1" aria-hidden="false"
                                    style="fill:#1da1f2; cursor: pointer;"
                                    (click)="twitter(eventDetails.eventName,eventDetails.ticketmasterUrl)"></mat-icon>
                                <mat-icon svgIcon="fb-icon" class="mx-1" aria-hidden="false"
                                    style=" fill:#1b5eee; cursor: pointer;"
                                    (click)="facebook(eventDetails.ticketmasterUrl)"></mat-icon>
                            </div>

                        </div>
                    </mat-tab>

                    <mat-tab label="Artist/Teams">
                        <div *ngIf="eventDetails.Artists ==''"
                            class="no-artist-data m-auto col-lg-8 col-8 text-center fs-5 bg-white text-danger rounded-5">
                            No music related artist details to show
                        </div>
                        <div id="carouselExampleControls" class="carousel" data-ride="false">
                            <div class="carousel-inner">
                                <div class="mt-3 mx-auto text-center w-75 text-white">
                                    <ng-container *ngFor="let allA of eventDetails.Artists; let i = index">
                                        <div class="carousel-item" [class.active]="i == 0">
                                            <div class="col-md-12 mx-auto">
                                                <div class="row mb-5 d-flex align-items-center justify-content-center">
                                                    <div class="col-md-3 col-sm-12">
                                                        <img [src]="allA.img" class="rounded-circle img-fluid"
                                                            height="150" width="150">
                                                        <p class="m-2 fs-4 event-card-headings">{{allA.spotifyName}}</p>
                                                    </div>
                                                    <div class="col-md-3 col-sm-12 mt-3 justify-content-center">
                                                        <p class="fs-5 justify-content-center pb-2 event-card-headings">
                                                            Popularity</p>
                                                        <mat-progress-spinner class='mx-auto' color="warn"
                                                            mode="determinate" diameter="35" [value]="allA.popularity">
                                                        </mat-progress-spinner>
                                                        <span style="top:-28px; position: relative;">
                                                            {{allA.popularity}}
                                                        </span>
                                                    </div>
                                                    <div class="col-md-3 col-sm-12 justify-content-center">
                                                        <p class="fs-5 event-card-headings pb-2">Followers</p>
                                                        <p class="pb-2">{{allA.followers | number: '1.0-0'}}</p>
                                                    </div>
                                                    <div class="col-md-3 col-sm-12 justify-content-center">
                                                        <p class="fs-5 event-card-headings pb-2">Spotify Link</p>
                                                        <a href="{{allA.link}}" target="_blank">
                                                            <mat-icon svgIcon="spotify-icon" aria-hidden="false"
                                                                style="color:green; height: 30px; width: 30px;">
                                                            </mat-icon>
                                                        </a>
                                                    </div>
                                                </div>
                                                <div class="row mb-5">
                                                    <p class="text-left event-card-headings pb-2 fs-5">Album featuring
                                                        {{allA.spotifyName}}</p>
                                                    <div class="col-md-4 col-sm-12">
                                                        <img [src]="allA.albumImg1" class="img-fluid mb-3 w-65 h-65">
                                                    </div>
                                                    <div class="col-md-4 col-sm-12">
                                                        <img [src]="allA.albumImg2" class="img-fluid mb-3 h-65 w-65">
                                                    </div>
                                                    <div class="col-md-4 col-sm-12">
                                                        <img [src]="allA.albumImg3" class="img-fluid mb-3 h-65 w-65">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </ng-container>
                                </div>
                            </div>
                            <div *ngIf="eventDetails.Artists.length > 1">
                                <div class="carousel-control-prev" data-bs-target="#carouselExampleControls"
                                    data-bs-slide="prev" style="cursor: pointer;">
                                    <span class="carousel-control-prev-icon" aria-hidden="true"
                                        style="color:black"></span>
                                    <span class="visually-hidden">Previous</span>
                                </div>
                                <div class="carousel-control-next" data-bs-target="#carouselExampleControls"
                                    data-bs-slide="next" style="cursor: pointer;">
                                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                    <span class="visually-hidden">Next</span>
                                </div>
                            </div>
                        </div>
                    </mat-tab>

                    <mat-tab label="Venue">
                        <div class="col-lg-12 col-sm-12 mx-0 row pt-4 mb-4 col-12 mt-4" style="color:white;">
                            <div class="col-lg-6 col-sm-12">
                                <div *ngIf="eventDetails.venueName.length!=0" class="mb-4">
                                    <h5 class="m-0 fs-5 event-card-headings">Name</h5>
                                    <p class="pt-1">{{ eventDetails.venueName }}</p>
                                </div>
                                <div *ngIf="eventDetails.venueAddress.length!=0" class="mb-4">
                                    <h5 class="m-0 fs-5 event-card-headings">Address</h5>
                                    <p class="pt-1">{{ eventDetails.venueAddress }}</p>
                                </div>
                                <div *ngIf="eventDetails.phoneNumber.length!=0" class="mb-4">
                                    <h5 class="m-0 fs-5 event-card-headings">Phone Number</h5>
                                    <p class="pt-1">{{ eventDetails.phoneNumber }}</p>
                                </div>
                            </div>
                            <div class="col-lg-6 col-sm-12">
                                <!-- <div *ngIf="eventDetails.openHour.length!=0" class="mb-4">
                                    <h5 class="m-0 fs-5 event-card-headings">Open Hours</h5>
                                    <p class="mb-0 pb-0 pt-1" style="max-height: 3em; overflow: hidden;">{{ showMoreOpenHour ?
                                        eventDetails.openHour :
                                        eventDetails.openHour}}</p>
                                    <div class="pt-0 mt-0" style="color: #7ab8ce;" (click)="toggleShowMoreOpenHour()">
                                        <u>
                                            {{ showMoreOpenHour ? 'Show Less' : 'Show More' }}
                                        </u>
                                        <span *ngIf="showMoreOpenHour; else elseBlock1"><mat-icon
                                                svgIcon="expandless-icon" aria-hidden="false"></mat-icon></span>
                                        <ng-template #elseBlock1><mat-icon svgIcon="expandmore-icon"
                                                aria-hidden="false"></mat-icon></ng-template>
                                    </div>
                                </div> -->
                                <!-- <div *ngIf="eventDetails.generalRule.length!=0" class="mb-4">
                                    <h5 class="m-0 fs-5 event-card-headings">General Rule</h5>
                                    <p class="mb-0 pb-0 pt-1" style="max-height: 3em; overflow: hidden;">{{
                                        showMoreGeneralRule ? eventDetails.generalRule :
                                        eventDetails.generalRule}}</p>
                                    <div class="pt-0 mt-0" style="color: #7ab8ce;" (click)="toggleShowMoreGeneralRule()">
                                        <u>
                                            {{ showMoreGeneralRule ? 'Show Less' : 'Show More' }}
                                        </u>
                                        <span *ngIf="showMoreGeneralRule; else elseBlock2"><mat-icon
                                                svgIcon="expandless-icon" aria-hidden="false"></mat-icon></span>
                                        <ng-template #elseBlock2><mat-icon svgIcon="expandmore-icon"
                                                aria-hidden="false"></mat-icon></ng-template>
                                        </div>
                                </div> -->
                                <!-- <div *ngIf="eventDetails.childRule.length!=0" class="mb-4">
                                    <h5 class="m-0 fs-5 event-card-headings">Child Rule</h5>
                                    <p class="mb-0 pb-0 pt-1" style="max-height: 3em; overflow: hidden;">{{ showMoreChildRule
                                        ? eventDetails.childRule :
                                        eventDetails.childRule}}</p>
                                    <div class="pt-0 mt-0" style="color: #7ab8ce;" (click)="toggleShowMoreChildRule()">
                                        <u>
                                            {{ showMoreChildRule ? 'Show Less' : 'Show More' }}
                                        </u>
                                        <span *ngIf="showMoreChildRule; else elseBlock3"><mat-icon
                                                svgIcon="expandless-icon" aria-hidden="false"></mat-icon></span>
                                        <ng-template style="color:white" #elseBlock3><mat-icon svgIcon="expandmore-icon"
                                                aria-hidden="false"></mat-icon></ng-template>
                                        </div>
                                </div> -->
                                <div *ngIf="eventDetails.openHour.length!=0" class="mb-4">
                                    <h5 class="m-0 fs-5 event-card-headings">Open Hours</h5>
                                    <p class="mb-0 pb-0" [style.max-height]="showLessOpenHour ? '3em' : 'none'"
                                        style="overflow: hidden;">{{
                                        eventDetails.openHour }}</p>
                                    <div class="pt-0 mt-0" style="color: #7ab8ce; cursor: pointer;"
                                        (click)="toggleShowMoreOpenHour()">
                                        <u>
                                            {{ showLessOpenHour ? 'Show More' : 'Show Less' }}
                                        </u>
                                        <span *ngIf="!showLessOpenHour; else elseBlock3">
                                            <mat-icon svgIcon="expandless-icon" aria-hidden="false"></mat-icon>
                                        </span>
                                        <ng-template style="color:white" #elseBlock3>
                                            <mat-icon svgIcon="expandmore-icon" aria-hidden="false"></mat-icon>
                                        </ng-template>
                                    </div>
                                </div>
                                <div *ngIf="eventDetails.generalRule.length!=0" class="mb-4">
                                    <h5 class="m-0 fs-5 event-card-headings">General Rule</h5>
                                    <p class="mb-0 pb-0" [style.max-height]="showLessGeneralRule ? '3em' : 'none'"
                                        style="overflow: hidden;">{{
                                        eventDetails.generalRule }}</p>
                                    <div class="pt-0 mt-0" style="color: #7ab8ce; cursor: pointer;"
                                        (click)="toggleShowMoreGeneralRule()">
                                        <u>
                                            {{ showLessGeneralRule ? 'Show More' : 'Show Less' }}
                                        </u>
                                        <span *ngIf="!showLessGeneralRule; else elseBlock3">
                                            <mat-icon svgIcon="expandless-icon" aria-hidden="false"></mat-icon>
                                        </span>
                                        <ng-template style="color:white" #elseBlock3>
                                            <mat-icon svgIcon="expandmore-icon" aria-hidden="false"></mat-icon>
                                        </ng-template>
                                    </div>
                                </div>

                                <div *ngIf="eventDetails.childRule.length!=0" class="mb-4">
                                    <h5 class="m-0 fs-5 event-card-headings">Child Rule</h5>
                                    <p class="mb-0 pb-0" [style.max-height]="showLessChildRule ? '3em' : 'none'"
                                        style="overflow: hidden;">{{
                                        eventDetails.childRule }}</p>
                                    <div class="pt-0 mt-0" style="color: #7ab8ce; cursor: pointer;"
                                        (click)="toggleShowMoreChildRule()">
                                        <u>
                                            {{ showLessChildRule ? 'Show More' : 'Show Less' }}
                                        </u>
                                        <span *ngIf="!showLessChildRule; else elseBlock3">
                                            <mat-icon svgIcon="expandless-icon" aria-hidden="false"></mat-icon>
                                        </span>
                                        <ng-template style="color:white" #elseBlock3>
                                            <mat-icon svgIcon="expandmore-icon" aria-hidden="false"></mat-icon>
                                        </ng-template>
                                    </div>
                                </div>



                            </div>
                        </div>
                        <button mat-button (click)="openDialog()" class="btn redButton mb-5" style="color:white">Show
                            venue on
                            Google Map</button>

                    </mat-tab>
                </mat-tab-group>
            </div>
        </div>
        <div style="height: 10%;"></div>
    </div>

</div>